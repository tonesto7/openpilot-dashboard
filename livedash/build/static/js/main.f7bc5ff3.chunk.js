(this.webpackJsonplivedash=this.webpackJsonplivedash||[]).push([[0],{125:function(e,t,s){"use strict";s.r(t);var a=s(0),i=s.n(a),n=s(11),r=s.n(n),o=s(46),l=s.n(o),c=s(86),d=s.n(c),h=s(87),p=s.n(h),j=s(2);const x=p()(d.a);class b extends a.Component{constructor(e){super(e),this.layout={},this.state={data:Object.values(this.props.lines),layout:{colorway:["#ff7f0e","#2ca02c","#d62728","#9467bd","#e377c2","#bcbd22","#17becf","#1f77b4"],titlefont:{family:"Arial, sans-serif",size:24,color:"rgba(119,119,119,1)"},xaxis:{autorange:!0,gridcolor:"rgba(119,119,119,0.2)",color:"rgba(119,119,119,1)"},yaxis:{autorange:!0,color:"rgba(119,119,119,1)",gridcolor:"rgba(119,119,119,0.2)",tickangle:"auto",type:"linear"},showlegend:!0,legend:{x:0,y:1.06,orientation:"h",font:{color:"rgba(119,119,119,1)"}},plot_bgcolor:"rgba(0,0,0,0)",paper_bgcolor:"rgba(0,0,0,0)",width:700,height:450,margin:{l:50,r:5,b:30,t:50,pad:4},datarevision:0},frames:[],config:{displayModeBar:!0,displaylogo:!1},revision:0},this.responsiveChartRef=i.a.createRef()}componentDidMount(){const e=this.responsiveChartRef.current.getBoundingClientRect().width-5,t=this.responsiveChartRef.current.getBoundingClientRect().height;e!==this.state.layout.width&&this.setState({layout:{...this.state.layout,width:e,height:t}}),this.resizeListener=window.addEventListener("resize",(()=>{if(this.responsiveChartRef.current){const e=this.responsiveChartRef.current.getBoundingClientRect().width-5,t=this.responsiveChartRef.current.getBoundingClientRect().height;e!==this.state.layout.width&&this.setState({layout:{...this.state.layout,width:e,height:t}})}}))}componentWillUnmount(){window.removeEventListener("resize",this.resizeListener)}render(){return Object(j.jsx)("div",{ref:this.responsiveChartRef,id:this.props.event.layout.title,style:{height:"46vh"},children:Object(j.jsx)(x,{data:this.state.data,layout:{...this.layout,...this.state.layout,...this.props.event.layout},revision:this.props.event.revision,frames:[...this.state.frames,...this.props.event.frames],config:{...this.state.config,...this.props.event.config},onUpdate:e=>this.layout=e.layout})})}}const u={thermal:{freeSpacePercent:.2097935676574707,batteryPercent:100,fanSpeedPercentDesired:10,started:!1,usbOnline:!1,startedMonoTime:0,thermalStatus:"green",batteryCurrent:594631,batteryVoltage:4237493,chargingError:!1,chargingDisabled:!1,memoryUsagePercent:35,cpuUsagePercent:20,networkType:"wifi",offroadPowerUsage:25131,networkStrength:"good",carBatteryCapacity:29755978,cpu:[45.400001525878906,44.79999923706055,43.5,43.79999923706055],gpu:[41.900001525878906],mem:44.5,bat:0,ambient:36},controlsState:{vPid:0,vTargetLead:0,upAccelCmd:0,uiAccelCmd:0,cumLagMs:0,enabled:!1,vCruise:0,longitudinalPlanMonoTime:0,angleSteersDes:0,longControlState:"off",state:"disabled",ufAccelCmd:0,aTarget:0,active:!1,curvature:0,alertStatus:"normal",alertSize:"none",engageable:!1,alertBlinkingRate:0,startMonoTime:0,lateralPlanMonoTime:0,forceDecel:!1,":lateralControlState.indiState.active":!1,":lateralControlState.indiState.steerAngle":94.94609832763672,":lateralControlState.indiState.steerRate":-30533325976085657e-29,":lateralControlState.indiState.steerAccel":-24426660780868525e-28,":lateralControlState.indiState.rateSetPoint":0,":lateralControlState.indiState.accelSetPoint":0,":lateralControlState.indiState.accelError":0,":lateralControlState.indiState.delayedOutput":0,":lateralControlState.indiState.delta":0,":lateralControlState.indiState.output":0,":lateralControlState.indiState.saturated":!1,alertSound:"none",canErrorCounter:0},health:{voltage:12087,current:0,ignitionLine:!1,controlsAllowed:!1,gasInterceptorDetected:!1,hasGps:!0,canSendErrs:2663915,canFwdErrs:0,gmlanSendErrs:0,pandaType:"uno",fanSpeedRpm:375,usbPowerMode:"cdp",ignitionCan:!1,safetyModel:"noOutput",faultStatus:"none",powerSaveEnabled:!0,uptime:2419218,canRxErrs:0},radarState:{":leadOne.dRel":0,":leadOne.yRel":0,":leadOne.vRel":0,":leadOne.aRel":0,":leadOne.vLead":0,":leadOne.dPath":0,":leadOne.vLat":0,":leadOne.vLeadK":0,":leadOne.aLeadK":0,":leadOne.fcw":!1,":leadOne.status":!1,":leadOne.aLeadTau":0,":leadOne.modelProb":0,":leadOne.radar":!1,":leadTwo.dRel":0,":leadTwo.yRel":0,":leadTwo.vRel":0,":leadTwo.aRel":0,":leadTwo.vLead":0,":leadTwo.dPath":0,":leadTwo.vLat":0,":leadTwo.vLeadK":0,":leadTwo.aLeadK":0,":leadTwo.fcw":!1,":leadTwo.status":!1,":leadTwo.aLeadTau":0,":leadTwo.modelProb":0,":leadTwo.radar":!1,cumLagMs:-40.058692932128906,mdMonoTime:0xd2991bbe7d8,canMonoTimes:[],controlsStateMonoTime:0xd2991b0f4b4,radarErrors:[]},liveCalibration:{calStatus:1,calCycle:0,calPerc:100,extrinsicMatrix:[.019966470077633858,-.9998006224632263,.00019015562429558486,0,.009523315355181694,-1.3552527156068805e-20,-.9999546408653259,1.2200000286102295,.999755322933197,.019967375323176384,.009521417319774628,0],rpyCalib:[-23826511096558534e-21,-.00952345971018076,.019968701526522636],rpyCalibSpread:[0,0,0],validBlocks:50},carState:{vEgo:0,":wheelSpeeds.fl":0,":wheelSpeeds.fr":0,":wheelSpeeds.rl":0,":wheelSpeeds.rr":0,gas:0,gasPressed:!1,brake:0,brakePressed:!1,steeringAngle:94.94609832763672,steeringTorque:-4,steeringPressed:!1,":cruiseState.enabled":!1,":cruiseState.speed":0,":cruiseState.available":!1,":cruiseState.speedOffset":0,":cruiseState.standstill":!1,":cruiseState.nonAdaptive":!1,gearShifter:"park",steeringRate:0,aEgo:0,vEgoRaw:0,standstill:!0,brakeLights:!1,leftBlinker:!1,rightBlinker:!1,yawRate:0,genericToggle:!1,doorOpen:!1,seatbeltUnlatched:!1,canValid:!1,steeringTorqueEps:-42.5,clutchPressed:!1,steeringRateLimited:!1,stockAeb:!1,stockFcw:!1,espDisabled:!1,leftBlindspot:!1,rightBlindspot:!1,steerWarning:!1,steerError:!1},carControl:{enabled:!1,":cruiseControl.cancel":!1,":cruiseControl.override":!0,":cruiseControl.speedOverride":.30000001192092896,":cruiseControl.accelOverride":1,":hudControl.speedVisible":!1,":hudControl.setSpeed":70.83333587646484,":hudControl.lanesVisible":!1,":hudControl.leadVisible":!1,":hudControl.visualAlert":"none",":hudControl.audibleAlert":"none",":hudControl.rightLaneVisible":!1,":hudControl.leftLaneVisible":!1,":hudControl.rightLaneDepart":!1,":hudControl.leftLaneDepart":!1,":actuators.gas":0,":actuators.brake":0,":actuators.steer":0,":actuators.steerAngle":0,active:!1},longitudinalPlan:{vTarget:0,hasLead:!0,fcw:!1,mdMonoTime:0x70230509fa9d,radarStateMonoTime:0x70230735b8b6,vTargetFuture:7642090019328552e-46,longitudinalPlanSource:"mpc1",vCruise:0,aCruise:0,aTarget:0,vMax:0,vStart:0,aStart:0,processingDelay:.0022163549438118935},driverState:{frameId:210,faceOrientation:[-.19331105053424835,.42528432607650757,.19331105053424835],facePosition:[.2706354856491089,.19331105053424835],faceProb:1.005217432975769,leftEyeProb:1.005217432975769,rightEyeProb:1.005217432975769,leftBlinkProb:.03866221010684967,rightBlinkProb:.03866221010684967,faceOrientationStd:[.05159972980618477,.04607699066400528,.03534235060214996],facePositionStd:[.011215822771191597,.005191889591515064],sunglassesProb:.03866221010684967,modelExecutionTime:.01499489601701498,dspExecutionTime:.012737344019114971,poorVision:.46394652128219604,partialFace:.07732442021369934,distractedPose:.03866221010684967,distractedEyes:.03866221010684967},liveParameters:{valid:!0,gyroBias:0,angleOffset:.4804331064224243,angleOffsetAverage:.4804331064224243,stiffnessFactor:1,steerRatio:16.623638153076172,sensorValid:!0,yawRate:0,posenetSpeed:0,posenetValid:!0},cameraOdometry:{trans:[.0141754150390625,-.00048542022705078125,.002925872802734375],rot:[0,0,0],transStd:[.023609790951013565,.015066033229231834,.0341513529419899],rotStd:[.0007046477403491735,.0006267267162911594,.0007678816327825189],frameId:343,timestampEof:0xd2a7f3bf3d8},lateralPlan:{laneWidth:2.799999952316284,lProb:.15726622939109802,rProb:.17652960121631622,angleSteers:-23.378400802612305,mpcSolutionValid:!0,angleOffset:.4804331064224243,rateSteers:0,desire:"none",laneChangeState:"off",laneChangeDirection:"none",dPathPoints:[-.005084991455078125,-.005084991455078125,-.005084991455078125,-.005084991455078125,-.005084991455078125,-.005084991455078125,-.005084991455078125,-.005084991455078125,-.005084991455078125,-.005084991455078125,-.005084991455078125,-.005084991455078125,-.005084991455078125,-.005084991455078125,-.005084991455078125,-.005084991455078125,-.005084991455078125],dProb:0},carParams:{carName:"toyota",carFingerprint:"TOYOTA COROLLA TSS2 2019",enableGasInterceptor:!1,enableCruise:!0,enableCamera:!0,enableDsu:!1,enableApgs:!1,minEnableSpeed:-1,minSteerSpeed:0,safetyModel:"toyota",safetyParam:50,steerMaxBP:[0],steerMaxV:[1],gasMaxBP:[0],gasMaxV:[.5],brakeMaxBP:[0],brakeMaxV:[1],mass:1523.9915771484375,wheelbase:2.6700000762939453,centerToFront:1.1748000383377075,steerRatio:15.329999923706055,steerRatioRear:0,rotationalInertia:2548.41552734375,tireStiffnessFront:186196.578125,tireStiffnessRear:231266.25,":longitudinalTuning.kpBP":[0,5,20],":longitudinalTuning.kpV":[1.2999999523162842,1,.699999988079071],":longitudinalTuning.kiBP":[0,5,12,20,27],":longitudinalTuning.kiV":[.3499999940395355,.23000000417232513,.20000000298023224,.17000000178813934,.10000000149011612],":longitudinalTuning.deadzoneBP":[0,8.050000190734863],":longitudinalTuning.deadzoneV":[0,.14000000059604645],":lateralTuning.indi.outerLoopGainBP":[18,22,26],":lateralTuning.indi.outerLoopGainV":[8,11,14.899999618530273],":lateralTuning.indi.innerLoopGainBP":[18,22,26],":lateralTuning.indi.innerLoopGainV":[9,12,15],":lateralTuning.indi.timeConstantBP":[18,22,26],":lateralTuning.indi.timeConstantV":[1,3,4.5],":lateralTuning.indi.actuatorEffectivenessBP":[18,22,26],":lateralTuning.indi.actuatorEffectivenessV":[9,12,15],steerLimitAlert:!1,vEgoStopping:0,directAccelControl:!1,stoppingControl:!1,startAccel:1.2000000476837158,steerRateCost:.5,steerControlType:"torque",radarOffCan:!1,steerActuatorDelay:.44999998807907104,openpilotLongitudinalControl:!0,carVin:"JTDS4MCE2MJ056503",isPandaBlack:!0,dashcamOnly:!1,safetyModelPassive:"silent",transmissionType:"unknown",radarTimeStep:.05000000074505806,communityFeature:!1,steerLimitTimer:.4000000059604645,fingerprintSource:"can",networkLocation:"fwdCamera",minSpeedCan:.30000001192092896,stoppingBrakeRate:.10000000149011612,startingBrakeRate:2},driverMonitoringState:{faceDetected:!0,isDistracted:!1,awarenessStatus:1,posePitchOffset:0,posePitchValidCount:0,poseYawOffset:0,poseYawValidCount:0,stepChange:.00909090880304575,awarenessActive:1,awarenessPassive:1,isLowStd:!0,hiStdCount:0,isActiveMode:!0},frontFrame:{frameId:235,encodeId:0,timestampEof:0x7023b15ee6e8,frameLength:4494,integLines:4483,globalGain:175,frameType:"front",timestampSof:0,lensPos:0,lensSag:0,lensErr:0,lensTruePos:0,gainFrac:.2196885049343109,recoverState:0},testJoystick:{axes:[],buttons:[],enabled:!1,axesMode:[]}};var g=s(188),m=s(161),_=s(80),O=s(162),v=s(189),y=s(164),f=s(165),S=s(166),w=s(158),k=s(195),C=s(89),P=s.n(C);class T extends a.Component{constructor(e){super(e),this.selected={},this.renderButtons=()=>{const e=[];return Object.entries(u).forEach((t=>{let[s,a]=t;if("object"===typeof a){const t=[];Object.entries(a).forEach((e=>{let[s,a]=e;"DEBUG"!==a&&"logMonoTime"!==s&&t.push(Object(j.jsx)(w.a,{style:{textTransform:"none",borderRadius:"0",minWidth:"40ch",maxHeight:"20px"},value:s,"aria-label":s,children:s},s))})),e.push(Object(j.jsxs)(g.a,{children:[Object(j.jsx)(m.a,{expandIcon:Object(j.jsx)(P.a,{}),"aria-controls":"panel1a-content",id:"panel1a-header",children:Object(j.jsx)(_.a,{variant:"body1",children:s})}),Object(j.jsx)(O.a,{style:{justifyContent:"center"},children:Object(j.jsx)(k.a,{orientation:"vertical",value:this.selected[s],onChange:(e,t)=>{this.selected[s]=t,this.setState({render_revision:this.state.render_revision+1})},"aria-label":"lines selected",children:t})})]},s))}})),e},this.state={render_revision:0}}shouldComponentUpdate(e,t){return e.show!==this.props.show||t.render_revision!==this.state.render_revision}render(){return this.selected=this.props.prev_selection,Object(j.jsxs)(v.a,{open:this.props.show,"aria-labelledby":"form-dialog-title",children:[Object(j.jsx)(y.a,{children:this.renderButtons()}),Object(j.jsx)(f.a,{children:Object(j.jsx)(S.a,{onClick:()=>this.props.setLogParams(this.selected),color:"default",children:"Save"})})]})}}var z=s(167),M=s(168),F=s(169),D=s(192),J=s(170),R=s(171);class E extends a.Component{constructor(e){super(e),this.plotname="",this.lines=[],this.renderButtons=()=>this.props.lines_available.map((e=>Object(j.jsx)(w.a,{style:{textTransform:"none",borderRadius:"0",minWidth:"25ch",maxHeight:"20px"},value:e,"aria-label":e,children:e},e))),this.state={render_revision:0}}shouldComponentUpdate(e,t){return e.show!==this.props.show||t.render_revision!==this.state.render_revision}render(){return Object(j.jsxs)(v.a,{open:this.props.show,"aria-labelledby":"form-dialog-title",children:[Object(j.jsx)(z.a,{id:"form-dialog-title",children:"Add Graph"}),Object(j.jsx)(y.a,{children:Object(j.jsxs)(M.a,{container:!0,spacing:2,direction:"column",alignItems:"center",children:[Object(j.jsx)(M.a,{item:!0,children:Object(j.jsxs)(F.a,{children:[Object(j.jsx)(D.a,{htmlFor:"plotname",children:"Plot Name"}),Object(j.jsx)(J.a,{id:"plotname",onChange:e=>this.plotname=e.target.value,"aria-describedby":"plotname-helper-text",inputProps:{"aria-label":"Plot Name"}}),Object(j.jsx)(R.a,{id:"plotname-helper-text",children:"Can be left empty"})]})}),Object(j.jsx)(M.a,{item:!0,children:Object(j.jsx)(k.a,{orientation:"vertical",value:this.lines,onChange:(e,t)=>{this.lines=t,this.setState({render_revision:this.state.render_revision+1})},"aria-label":"lines available",children:this.renderButtons()})})]})}),Object(j.jsx)(f.a,{children:Object(j.jsx)(S.a,{onClick:()=>this.props.addplot(this.plotname,this.lines),color:"default",children:"Save"})})]})}}var L=s(172),A=s(173),H=s(193);class I extends a.Component{constructor(e){super(e),this.state={cols:0,rateHz:20,max_datapoints:100,webgl:!0}}componentDidMount(){this.setState({cols:this.props.cols,rateHz:this.props.rateHz,max_datapoints:this.props.max_datapoints,webgl:this.props.webgl})}shouldComponentUpdate(e,t){return e.show!==this.props.show||t!==this.state}render(){return Object(j.jsxs)(v.a,{open:this.props.show,"aria-labelledby":"form-dialog-title",children:[Object(j.jsx)(z.a,{id:"form-dialog-title",children:"Graphs settings"}),Object(j.jsx)(y.a,{children:Object(j.jsxs)(M.a,{container:!0,spacing:2,direction:"column",alignItems:"flex-start",children:[Object(j.jsx)(M.a,{item:!0,children:Object(j.jsxs)(F.a,{children:[Object(j.jsx)(D.a,{htmlFor:"cols",children:"Graph columns"}),Object(j.jsx)(J.a,{id:"cols",value:this.state.cols,onChange:e=>this.setState({cols:Math.min(Math.max(parseInt(e.target.value),1),12)}),"aria-describedby":"cols-helper-text",inputProps:{"aria-label":"Graph columns"}}),Object(j.jsx)(R.a,{id:"cols-helper-text",children:"Max: 12"})]})}),Object(j.jsx)(M.a,{item:!0,children:Object(j.jsxs)(F.a,{children:[Object(j.jsx)(D.a,{htmlFor:"rateHz",children:"Render rate"}),Object(j.jsx)(J.a,{id:"rateHz",value:this.state.rateHz,onChange:e=>this.setState({rateHz:Math.min(Math.max(parseInt(e.target.value),.5),20)}),endAdornment:Object(j.jsx)(L.a,{position:"end",children:"Hz"}),"aria-describedby":"rateHz-helper-text",inputProps:{"aria-label":"Render rate"}}),Object(j.jsx)(R.a,{id:"rateHz-helper-text",children:"Min: 0.5, Max: 20"})]})}),Object(j.jsx)(M.a,{item:!0,children:Object(j.jsxs)(F.a,{children:[Object(j.jsx)(D.a,{htmlFor:"max_datapoints",children:"Max data points"}),Object(j.jsx)(J.a,{id:"max_datapoints",value:this.state.max_datapoints,onChange:e=>this.setState({max_datapoints:Math.min(Math.max(parseInt(e.target.value),20),1e4)}),"aria-describedby":"max_datapoints-helper-text",inputProps:{"aria-label":"Max data points"}}),Object(j.jsx)(R.a,{id:"max_datapoints-helper-text",children:"Max: 10000"})]})}),Object(j.jsx)(M.a,{item:!0,children:Object(j.jsx)(A.a,{control:Object(j.jsx)(H.a,{checked:this.state.webgl,onChange:()=>this.setState({webgl:!this.state.webgl}),name:"webGL"}),label:"WebGL support"})})]})}),Object(j.jsx)(f.a,{children:Object(j.jsx)(S.a,{onClick:()=>this.props.setSettings(this.state.cols,this.state.rateHz,this.state.max_datapoints,this.state.webgl),color:"default",children:"Save"})})]})}}var W=s(5),B=s(196),U=s(197),V=s(191),G=s(90),N=s.n(G),Y=s(91),X=s.n(Y),q=s(49),K=s.n(q),Z=s(78),$=s.n(Z);const Q={x:[],y:[],type:"scattergl",name:"Line 1",mode:"lines",connectgaps:!1,datarevision:0},ee={layout:{title:"debug_filler",datarevision:0},frames:[],config:{},revision:0,lines_attach:[]};class te extends a.Component{constructor(e){var t;super(e),t=this,this.actions=[{icon:Object(j.jsx)(N.a,{}),name:"Add Signals",handler:()=>{this.setState({show_addlines:!0})}},{icon:Object(j.jsx)(X.a,{}),name:"Add Graph",handler:()=>{this.setState({show_addgraph:!0})}},{icon:Object(j.jsx)(K.a,{}),name:"Settings",handler:()=>{this.setState({show_settings:!0})}},{icon:Object(j.jsx)($.a,{}),name:"DelPlots",handler:()=>{this.plots={}}},{icon:Object(j.jsx)($.a,{}),name:"ClearLines",handler:()=>{this.lines={},this.selected={}}}],this.plots={},this.lines={},this.selected={},this.ws_status="",this.data_counter=0,this.renderDelay=()=>{clearInterval(this.render_delay),this.data_counter>this.state.render_revision&&this.setState({render_revision:this.data_counter}),this.render_delay=setInterval(this.renderDelay,1e3/this.state.rateHz)},this.messageProcess=e=>{Object.keys(this.selected).forEach((t=>{this.selected[t].forEach((s=>{if(e[t]){let a=Math.round(e[t].logMonoTime/1e6)/1e3,i=null;if(s.startsWith(":")){const a=s.slice(1);i=l.a.get(e[t],a,null)}else i=e[t][s];const n=t+":"+s;Array.isArray(i)?i.forEach(((e,t)=>{"boolean"===typeof e&&(e+=0),"number"!==typeof e&&(e=null),this.addUpdateLines(n+t,a,e,this.state.max_datapoints)})):("boolean"===typeof i&&(i+=0),"number"!==typeof i&&(i=null),this.addUpdateLines(s,a,i,this.state.max_datapoints))}}))}))},this.addUpdateLines=function(e,s,a){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100;if(!t.lines[e]){const s=JSON.parse(JSON.stringify(Q));s.type=t.state.webgl?"scattergl":"scatter",s.name=e,t.lines[e]=s}t.lines[e].x.slice(-1)[0]>=s||(t.lines[e].x.push(s),t.lines[e].y.push(a),t.lines[e].x.length>i&&0!==i&&(t.lines[e].x.shift(),t.lines[e].y.shift()),t.lines[e].datarevision+=1,t.data_counter+=1)},this.addUpdatePlots=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(0===e.length&&(e=(Math.random()+1).toString(36).substring(7)),!t.plots[e]&&a.length>0){const s=JSON.parse(JSON.stringify(ee));s.layout.title=e,s.lines_attach=a,t.plots[e]=s}a.length>0&&(t.plots[e].lines_attach=a),t.plots[e]&&(t.plots[e].revision=s,t.plots[e].layout.datarevision=s)},this.renderReadyPlots=()=>{const e=[];return Object.keys(this.plots).forEach((t=>{if(this.plots[t].lines_attach.length){const a={};var s=0;Object.values(this.plots[t].lines_attach).forEach((e=>{this.lines[e]&&(a[e]=this.lines[e],s+=this.lines[e].datarevision)})),this.addUpdatePlots(t,s),e.push(Object(j.jsx)(M.a,{item:!0,xs:12,md:12/this.state.layout_cols,children:Object(j.jsx)(b,{event:this.plots[t],lines:a})},t))}})),e},this.state={show_addlines:!1,show_addgraph:!1,show_settings:!1,layout_cols:1,rateHz:10,max_datapoints:200,webgl:!0,speeddial:!1,render_revision:0},this.wshelper=i.a.createRef()}componentDidMount(){this.render_delay=setInterval(this.renderDelay,1e3/this.state.rateHz)}componentWillUnmount(){clearInterval(this.render_delay)}shouldComponentUpdate(e,t){return!!this.props.active&&(t.render_revision!==this.state.render_revision||t.speeddial!==this.state.speeddial||t.show_addlines!==this.state.show_addlines||t.show_addgraph!==this.state.show_addgraph||t.show_settings!==this.state.show_settings)}render(){const{classes:e}=this.props;return Object(j.jsxs)(a.Fragment,{children:[Object(j.jsx)(M.a,{container:!0,direction:"row",spacing:0,justify:"flex-start",alignItems:"flex-start",children:this.renderReadyPlots()}),this.state.show_addlines?Object(j.jsx)(T,{setLogParams:e=>{this.setState({show_addlines:!1}),this.selected=e},show:this.state.show_addlines,prev_selection:this.selected}):null,this.state.show_addgraph?Object(j.jsx)(E,{addplot:(e,t)=>this.setState({show_addgraph:!1},this.addUpdatePlots(e,0,t)),show:this.state.show_addgraph,lines_available:Object.keys(this.lines)}):null,this.state.show_settings?Object(j.jsx)(I,{setSettings:(e,t,s,a)=>this.setState({show_settings:!1,layout_cols:e,rateHz:t,max_datapoints:s,webgl:a}),show:this.state.show_settings,cols:this.state.layout_cols,rateHz:this.state.rateHz,max_datapoints:this.state.max_datapoints,webgl:this.state.webgl}):null,Object(j.jsx)(B.a,{ariaLabel:"SpeedDial tooltip example",className:e.speedDial,icon:Object(j.jsx)(U.a,{}),FabProps:{size:"small",color:"secondary"},onClick:()=>this.setState({speeddial:!this.state.speeddial}),open:this.state.speeddial,children:this.actions.map((e=>Object(j.jsx)(V.a,{icon:e.icon,tooltipTitle:e.name,tooltipOpen:!0,onClick:e.handler},e.name)))})]})}}var se=Object(W.a)((e=>({speedDial:{position:"fixed",bottom:e.spacing(1),right:e.spacing(1)},mainDiv:{flexGrow:1}})))(te),ae=s(184),ie=s(194);class ne extends a.Component{constructor(e){super(e),this.state=this.props.joy_finetune}shouldComponentUpdate(e,t){return t!==this.state}render(){const e=l.a.cloneDeep(this.state);return Object(j.jsxs)(v.a,{open:this.props.show,"aria-labelledby":"joystick-settings",children:[Object(j.jsx)(z.a,{id:"joystick-settings",children:"Joystick settings"}),Object(j.jsx)(y.a,{children:Object(j.jsxs)(M.a,{container:!0,spacing:1,direction:"row",alignItems:"center",children:[Object(j.jsx)(M.a,{item:!0,xs:6,children:Object(j.jsxs)(M.a,{container:!0,alignItems:"center",spacing:2,children:[Object(j.jsx)(M.a,{item:!0,xs:6,align:"center",children:Object(j.jsxs)(F.a,{children:[Object(j.jsx)(D.a,{htmlFor:"axis_0_neg",children:"axis_0 negative"}),Object(j.jsx)(J.a,{id:"axis_0_neg",value:e.axes_scale[0][0],onChange:t=>{e.axes_scale[0][0]=t.target.value,this.setState(e)},inputProps:{"aria-label":"axis_0 negative",style:{textAlign:"center"}}})]})}),Object(j.jsx)(M.a,{item:!0,xs:6,align:"center",children:Object(j.jsxs)(F.a,{children:[Object(j.jsx)(D.a,{htmlFor:"axis_0_pos",children:"axis_0 positive"}),Object(j.jsx)(J.a,{id:"axis_0_pos",value:e.axes_scale[0][1],onChange:t=>{e.axes_scale[0][1]=t.target.value,this.setState(e)},inputProps:{"aria-label":"axis_0 positive",style:{textAlign:"center"}}})]})}),Object(j.jsx)(M.a,{item:!0,xs:6,align:"center",children:Object(j.jsxs)(F.a,{children:[Object(j.jsx)(D.a,{htmlFor:"axis_1_neg",children:"axis_1 negative"}),Object(j.jsx)(J.a,{id:"axis_1_neg",value:e.axes_scale[1][0],onChange:t=>{e.axes_scale[1][0]=t.target.value,this.setState(e)},inputProps:{"aria-label":"axis_1 negative",style:{textAlign:"center"}}})]})}),Object(j.jsx)(M.a,{item:!0,xs:6,align:"center",children:Object(j.jsxs)(F.a,{children:[Object(j.jsx)(D.a,{htmlFor:"axis_1_pos",children:"axis_1 positive"}),Object(j.jsx)(J.a,{id:"axis_1_pos",value:e.axes_scale[1][1],onChange:t=>{e.axes_scale[1][1]=t.target.value,this.setState(e)},inputProps:{"aria-label":"axis_1 positive",style:{textAlign:"center"}}})]})}),Object(j.jsx)(M.a,{item:!0,xs:12,align:"center",children:Object(j.jsxs)(F.a,{fullWidth:!0,children:[Object(j.jsx)(D.a,{htmlFor:">axis_0_deadzone",children:"axis_0 deadzone"}),Object(j.jsx)(J.a,{id:"axis_0_deadzone",value:e.axes_deadzone[0],onChange:t=>{e.axes_deadzone[0]=t.target.value,this.setState(e)},inputProps:{"aria-label":"axis_0 deadzone",style:{textAlign:"center"}}})]})}),Object(j.jsx)(M.a,{item:!0,xs:12,align:"center",children:Object(j.jsxs)(F.a,{fullWidth:!0,children:[Object(j.jsx)(D.a,{htmlFor:"axis_1_deadzone",children:"axis_1 deadzone"}),Object(j.jsx)(J.a,{id:"axis_1_deadzone",value:e.axes_deadzone[1],onChange:t=>{e.axes_deadzone[1]=t.target.value,this.setState(e)},inputProps:{"aria-label":"axis_1 deadzone",style:{textAlign:"center"}}})]})}),Object(j.jsx)(M.a,{item:!0,xs:12,align:"center",children:Object(j.jsxs)(F.a,{fullWidth:!0,children:[Object(j.jsx)(D.a,{htmlFor:"axis_0_mode",children:"axis_0 mode"}),Object(j.jsxs)(ae.a,{id:"axis_0_mode",value:e.axesMode[0],onChange:t=>{e.axesMode[0]=t.target.value,this.setState(e)},displayEmpty:!0,inputProps:{"aria-label":"axis_0 mode"},children:[Object(j.jsx)(ie.a,{value:"interceptor",children:"interceptor"}),Object(j.jsx)(ie.a,{value:"injector",children:"injector"}),Object(j.jsx)(ie.a,{value:"adder",children:"adder"})]})]})}),Object(j.jsx)(M.a,{item:!0,xs:12,align:"center",children:Object(j.jsxs)(F.a,{fullWidth:!0,children:[Object(j.jsx)(D.a,{htmlFor:"axis_1_mode",children:"axis_1 mode"}),Object(j.jsxs)(ae.a,{id:"axis_1_mode",value:e.axesMode[1],onChange:t=>{e.axesMode[1]=t.target.value,this.setState(e)},displayEmpty:!0,inputProps:{"aria-label":"axis_1 mode"},children:[Object(j.jsx)(ie.a,{value:"interceptor",children:"interceptor"}),Object(j.jsx)(ie.a,{value:"injector",children:"injector"}),Object(j.jsx)(ie.a,{value:"adder",children:"adder"})]})]})}),Object(j.jsx)(M.a,{item:!0,xs:12,align:"center",children:Object(j.jsx)(A.a,{control:Object(j.jsx)(H.a,{checked:e.restJoystick_0,onChange:()=>{e.restJoystick_0=!e.restJoystick_0,this.setState(e)},name:"restJoystick_0"}),label:"vJoystick_0 rest"})})]})}),Object(j.jsx)(M.a,{item:!0,xs:6,children:Object(j.jsxs)(M.a,{container:!0,alignItems:"center",spacing:2,children:[Object(j.jsx)(M.a,{item:!0,xs:6,align:"center",children:Object(j.jsxs)(F.a,{children:[Object(j.jsx)(D.a,{htmlFor:"axis_2_neg",children:"axis_2 negative"}),Object(j.jsx)(J.a,{id:"axis_2_neg",value:e.axes_scale[2][0],onChange:t=>{e.axes_scale[2][0]=t.target.value,this.setState(e)},inputProps:{"aria-label":"axis_2 negative",style:{textAlign:"center"}}})]})}),Object(j.jsx)(M.a,{item:!0,xs:6,align:"center",children:Object(j.jsxs)(F.a,{children:[Object(j.jsx)(D.a,{htmlFor:"axis_2_pos",children:"axis_2 positive"}),Object(j.jsx)(J.a,{id:"axis_2_pos",value:e.axes_scale[2][1],onChange:t=>{e.axes_scale[2][1]=t.target.value,this.setState(e)},inputProps:{"aria-label":"axis_2 positive",style:{textAlign:"center"}}})]})}),Object(j.jsx)(M.a,{item:!0,xs:6,align:"center",children:Object(j.jsxs)(F.a,{children:[Object(j.jsx)(D.a,{htmlFor:"axis_3_neg",children:"axis_3 negative"}),Object(j.jsx)(J.a,{id:"axis_3_neg",value:e.axes_scale[3][0],onChange:t=>{e.axes_scale[3][0]=t.target.value,this.setState(e)},inputProps:{"aria-label":"axis_3 negative",style:{textAlign:"center"}}})]})}),Object(j.jsx)(M.a,{item:!0,xs:6,align:"center",children:Object(j.jsxs)(F.a,{children:[Object(j.jsx)(D.a,{htmlFor:"axis_3_pos",children:"axis_3 positive"}),Object(j.jsx)(J.a,{id:"axis_3_pos",value:e.axes_scale[3][1],onChange:t=>{e.axes_scale[3][1]=t.target.value,this.setState(e)},inputProps:{"aria-label":"axis_3 positive",style:{textAlign:"center"}}})]})}),Object(j.jsx)(M.a,{item:!0,xs:12,align:"center",children:Object(j.jsxs)(F.a,{fullWidth:!0,children:[Object(j.jsx)(D.a,{htmlFor:">axis_2_deadzone",children:"axis_2 deadzone"}),Object(j.jsx)(J.a,{id:"axis_2_deadzone",value:e.axes_deadzone[2],onChange:t=>{e.axes_deadzone[2]=t.target.value,this.setState(e)},inputProps:{"aria-label":"axis_2 deadzone",style:{textAlign:"center"}}})]})}),Object(j.jsx)(M.a,{item:!0,xs:12,align:"center",children:Object(j.jsxs)(F.a,{fullWidth:!0,children:[Object(j.jsx)(D.a,{htmlFor:"axis_3_deadzone",children:"axis_3 deadzone"}),Object(j.jsx)(J.a,{id:"axis_3_deadzone",value:e.axes_deadzone[3],onChange:t=>{e.axes_deadzone[3]=t.target.value,this.setState(e)},inputProps:{"aria-label":"axis_3 deadzone",style:{textAlign:"center"}}})]})}),Object(j.jsx)(M.a,{item:!0,xs:12,align:"center",children:Object(j.jsxs)(F.a,{fullWidth:!0,children:[Object(j.jsx)(D.a,{htmlFor:"axis_2_mode",children:"axis_2 mode"}),Object(j.jsxs)(ae.a,{id:"axis_2_mode",value:e.axesMode[2],onChange:t=>{e.axesMode[2]=t.target.value,this.setState(e)},displayEmpty:!0,inputProps:{"aria-label":"axis_2 mode"},children:[Object(j.jsx)(ie.a,{value:"interceptor",children:"interceptor"}),Object(j.jsx)(ie.a,{value:"injector",children:"injector"}),Object(j.jsx)(ie.a,{value:"adder",children:"adder"})]})]})}),Object(j.jsx)(M.a,{item:!0,xs:12,align:"center",children:Object(j.jsxs)(F.a,{fullWidth:!0,children:[Object(j.jsx)(D.a,{htmlFor:"axis_3_mode",children:"axis_3 mode"}),Object(j.jsxs)(ae.a,{id:"axis_3_mode",value:e.axesMode[3],onChange:t=>{e.axesMode[3]=t.target.value,this.setState(e)},displayEmpty:!0,inputProps:{"aria-label":"axis_3 mode"},children:[Object(j.jsx)(ie.a,{value:"interceptor",children:"interceptor"}),Object(j.jsx)(ie.a,{value:"injector",children:"injector"}),Object(j.jsx)(ie.a,{value:"adder",children:"adder"})]})]})}),Object(j.jsx)(M.a,{item:!0,xs:12,align:"center",children:Object(j.jsx)(A.a,{control:Object(j.jsx)(H.a,{checked:e.restJoystick_1,onChange:()=>{e.restJoystick_1=!e.restJoystick_1,this.setState(e)},name:"restJoystick_1"}),label:"vJoystick_1 rest"})})]})})]})}),Object(j.jsx)(f.a,{children:Object(j.jsx)(S.a,{onClick:()=>this.props.setSettings(this.state),color:"default",children:"Save"})})]})}}var re=s(79),oe=s.n(re),le=s(94),ce=s.n(le),de=s(93),he=s.n(de);class pe extends a.Component{constructor(e){super(e),this.joystick_msg={testJoystick:{axes:[0,0,0,0],buttons:[],enabled:!0,axesMode:["","","",""]}},this.joy_finetune={axes_scale:[[1,1],[1,1],[1,1],[1,1]],axes_deadzone:[.01,.01,.01,.01],restJoystick_0:!0,restJoystick_1:!0,axesMode:["interceptor","interceptor","interceptor","interceptor"]},this.last_timestamp=0,this.data_revision=0,this.renderJoystick_0=!0,this.renderJoystick_1=!0,this.renderDelay=()=>{clearInterval(this.render_delay),this.state.enabled&&(this.joystick_msg.testJoystick.axesMode=this.joy_finetune.axesMode,this.props.procData(this.joystick_msg)),this.state.revision!==this.data_revision&&this.setState({revision:this.data_revision}),this.render_delay=setInterval(this.renderDelay,1e3/this.state.rateHz)},this.resetMessage=()=>{this.joystick_msg.testJoystick.enabled=this.state.enabled,this.state.enabled||this.props.procData(this.joystick_msg)},this.realGamepad=()=>{const e=navigator.getGamepads();Object.values(e).forEach((e=>{if(!e||e.timestamp===this.last_timestamp||e.id.startsWith("Surface"))return;e.axes.forEach(((e,t)=>{let s=e;if(t<this.joy_finetune.axes_scale.length){const e=parseFloat(this.joy_finetune.axes_deadzone[t]),a=parseFloat(this.joy_finetune.axes_scale[t][0]),i=parseFloat(this.joy_finetune.axes_scale[t][1]);-e<s&&s<e&&(s=0),s*=s<0?a:i}this.joystick_msg.testJoystick.axes[t]=s}));const t=[];Object.values(e.buttons).forEach((e=>{t.push(e.value)})),this.joystick_msg.testJoystick.buttons=t,this.data_revision+=1,this.last_timestamp=e.timestamp}))},this.virtualJoystick=(e,t)=>{if(0===t)return this.joystick_msg.testJoystick.axes[e]=0,this.joystick_msg.testJoystick.axes[e+1]=0,void(this.data_revision+=1);const s=t.instance.options.size/2;let a=(t.position.x-t.instance.position.x)/s*!t.lockX,i=(t.position.y-t.instance.position.y)/s*!t.lockY;const n=this.joy_finetune.axes_scale;a*=a<0?parseFloat(n[e][0]):parseFloat(n[e][1]),i<0?parseFloat(i*=n[e+1][0]):i*=parseFloat(n[e+1][1]),this.joystick_msg.testJoystick.axes[e]=a,this.joystick_msg.testJoystick.axes[e+1]=i,this.data_revision+=1},this.state={show_settings:!1,rateHz:10,revision:0,speeddial:!1,enabled:!1}}componentDidMount(){this.render_delay=setInterval(this.renderDelay,1e3/this.state.rateHz),this.checkJoy=setInterval(this.realGamepad,50)}componentWillUnmount(){clearInterval(this.render_delay),clearInterval(this.checkJoy)}shouldComponentUpdate(e,t){return!!this.props.active&&(t.revision!==this.state.revision||t.speeddial!==this.state.speeddial||t!==this.state.show_settings)}render(){const{classes:e}=this.props;return Object(j.jsxs)(a.Fragment,{children:[Object(j.jsxs)(M.a,{className:e.joystick,container:!0,spacing:0,direction:"row",justify:"center",alignItems:"center",children:[Object(j.jsxs)(M.a,{item:!0,xs:6,align:"center",children:[Object(j.jsxs)(_.a,{variant:"subtitle2",children:["X:",this.joystick_msg.testJoystick.axes[0].toFixed(3)," / Y:",this.joystick_msg.testJoystick.axes[1].toFixed(3)]}),this.renderJoystick_0?Object(j.jsx)(oe.a,{options:{mode:"semi",position:{top:"50%",left:"50%"},color:"red",size:200,dynamicPage:!0,lockX:!1,lockY:!1,restJoystick:this.joy_finetune.restJoystick_0,threshold:.06},style:{outline:"1px dashed grey",height:"75vh",position:"relative"},onMove:(e,t)=>this.virtualJoystick(0,t),onEnd:()=>{this.joy_finetune.restJoystick_0&&this.virtualJoystick(0,0)}}):(this.renderJoystick_0=!0,null)]}),Object(j.jsxs)(M.a,{item:!0,xs:6,align:"center",children:[Object(j.jsxs)(_.a,{variant:"subtitle2",children:["X:",this.joystick_msg.testJoystick.axes[2].toFixed(3)," / Y:",this.joystick_msg.testJoystick.axes[3].toFixed(3)]}),this.renderJoystick_1?Object(j.jsx)(oe.a,{options:{mode:"semi",position:{top:"50%",left:"50%"},color:"red",size:200,dynamicPage:!0,lockX:!1,lockY:!1,restJoystick:this.joy_finetune.restJoystick_1,threshold:.06},style:{outline:"1px dashed grey",height:"75vh",position:"relative"},onMove:(e,t)=>this.virtualJoystick(2,t),onEnd:()=>{this.joy_finetune.restJoystick_1&&this.virtualJoystick(2,0)}}):(this.renderJoystick_1=!0,null)]})]}),Object(j.jsxs)(B.a,{ariaLabel:"SpeedDial tooltip example",className:e.speedDial,icon:Object(j.jsx)(U.a,{}),FabProps:{size:"small",color:"secondary"},onClick:()=>this.setState({speeddial:!this.state.speeddial}),open:this.state.speeddial,children:[Object(j.jsx)(V.a,{icon:this.state.enabled?Object(j.jsx)(he.a,{}):Object(j.jsx)(ce.a,{}),tooltipTitle:this.state.enabled?"Disable":"Enable",tooltipOpen:!0,onClick:()=>this.setState({enabled:!this.state.enabled},this.resetMessage)}),Object(j.jsx)(V.a,{icon:Object(j.jsx)(K.a,{}),tooltipTitle:"Settings",tooltipOpen:!0,onClick:()=>{this.setState({show_settings:!0})}})]}),this.state.show_settings?Object(j.jsx)(ne,{setSettings:e=>{this.setState({show_settings:!1}),this.joy_finetune=e,this.renderJoystick_0=!1,this.renderJoystick_1=!1},show:this.state.show_settings,joy_finetune:this.joy_finetune}):null]})}}var je=Object(W.a)((e=>({joystick:{height:"80vh"},speedDial:{position:"fixed",bottom:e.spacing(1),right:e.spacing(1)}})))(pe),xe=s(174),be=s(70),ue=s.n(be),ge=s(71),me=s.n(ge);class _e extends a.Component{constructor(e){super(e),this.last_timestamp=0,this.data_revision=0,this.renderDelay=()=>{clearInterval(this.render_delay),this.setState({revision:this.revision+1}),this.render_delay=setInterval(this.renderDelay,1e3/this.state.rateHz)},this.messageProcess=e=>{"opEdit"in e&&this.setState({op_data:e.opEdit})},this.renderParams=e=>{const t=[];return Object.entries(e).forEach((s=>{let[a,i]=s;"boolean"===typeof i?t.push(Object(j.jsx)(M.a,{item:!0,xs:12,sm:6,md:3,children:Object(j.jsx)(A.a,{id:a,control:Object(j.jsx)(H.a,{checked:i,onChange:()=>{e[a]=!e[a],this.setState({op_data:e})},name:a}),label:a})},a)):"object"===typeof i?t.push(Object(j.jsx)(M.a,{item:!0,xs:12,sm:6,md:3,children:Object(j.jsxs)(F.a,{fullWidth:!0,children:[Object(j.jsx)(D.a,{htmlFor:"cols",children:a}),Object(j.jsx)(J.a,{id:a,value:i,onChange:t=>{e[a]=t.target.value.split(",").map((e=>parseFloat(e))),this.setState({op_data:e})},"aria-describedby":"{key}-helper-text",inputProps:{"aria-label":{key:a},style:{textAlign:"center"}}})]})},a)):"number"===typeof i?t.push(Object(j.jsx)(M.a,{item:!0,xs:12,sm:6,md:3,children:Object(j.jsxs)(F.a,{fullWidth:!0,children:[Object(j.jsx)(D.a,{htmlFor:"cols",children:a}),Object(j.jsx)(J.a,{id:a,value:i,onChange:t=>{e[a]=parseFloat(t.target.value),this.setState({op_data:e})},"aria-describedby":"{key}-helper-text",inputProps:{"aria-label":{key:a},style:{textAlign:"center"}}})]})},a)):t.push(Object(j.jsx)(M.a,{item:!0,xs:12,sm:6,md:3,children:Object(j.jsxs)(F.a,{fullWidth:!0,children:[Object(j.jsx)(D.a,{htmlFor:"cols",children:a}),Object(j.jsx)(J.a,{id:a,value:i,onChange:t=>{e[a]=t.target.value,this.setState({op_data:e})},"aria-describedby":"{key}-helper-text",inputProps:{"aria-label":{key:a},style:{textAlign:"center"}}})]})},a))})),t},this.state={rateHz:10,revision:0,op_data:{}}}componentDidMount(){this.render_delay=setInterval(this.renderDelay,1e3/this.state.rateHz)}componentWillUnmount(){clearInterval(this.render_delay)}shouldComponentUpdate(e,t){return!!this.props.active&&t.revision!==this.state.revision}render(){const{classes:e}=this.props,t=l.a.cloneDeep(this.state.op_data);return Object(j.jsxs)(a.Fragment,{children:[Object(j.jsx)("div",{style:{padding:20},children:Object(j.jsxs)(M.a,{container:!0,spacing:2,direction:"row",justify:"flex-start",alignItems:"center",children:[this.renderParams(t),Object(j.jsx)(M.a,{item:!0})]})}),Object(j.jsxs)(xe.a,{variant:"extended",color:"secondary",className:e.loadFab,onClick:()=>this.props.procData({opEdit:{loadRequest:!0}}),children:[Object(j.jsx)(ue.a,{className:e.extendedIcon}),"Load"]}),Object(j.jsxs)(xe.a,{variant:"extended",color:"secondary",className:e.saveFab,onClick:()=>this.props.procData({opEdit:this.state.op_data}),children:[Object(j.jsx)(me.a,{className:e.extendedIcon}),"Save"]})]})}}var Oe=Object(W.a)((e=>({loadFab:{position:"fixed",bottom:e.spacing(1),right:e.spacing(14)},saveFab:{position:"fixed",bottom:e.spacing(1),right:e.spacing(1)},extendedIcon:{marginRight:e.spacing(1)}})))(_e);class ve extends a.Component{render(){return Object(j.jsx)("div",{role:"tabpanel",hidden:this.props.value!==this.props.index,id:"plugin-tabpanel-".concat(this.props.index),"aria-labelledby":"plugin-tab-".concat(this.props.index),...this.props,children:this.props.children})}}class ye extends a.Component{constructor(e){super(e),this.timeout=250,this.connect=()=>{var e=new WebSocket(this.props.ws_url);this.props.status("connecting");let t=this;var s;e.onopen=()=>{this.setState({ws:e}),this.props.status("connected"),t.timeout=250,clearTimeout(s)},e.onclose=e=>{console.log("Socket is closed. Reconnect will be attempted in ".concat(Math.min(5,2*t.timeout/1e3)," second."),e.reason),this.props.status("closed"),t.timeout=2*t.timeout,s=setTimeout(this.checkSocketConnection,Math.min(5e3,t.timeout))},e.onerror=t=>{console.error("Socket encountered error: ",t.message,"Closing socket"),this.props.status("error"),e.close()},e.onmessage=e=>{try{const t=JSON.parse(e.data);t.publishers&&t.signals?this.props.updatePublishersAndSignals(t.publishers,t.signals):this.props.messageProcess(t)}catch(t){console.log(t),console.log(e.data)}}},this.sendMessage=e=>{const{ws:t}=this.state;t&&t.readyState!==WebSocket.CLOSED&&t.send(JSON.stringify(e))},this.checkSocketConnection=()=>{const{ws:e}=this.state;e&&e.readyState!==WebSocket.CLOSED||this.connect(this.props.ws_url)},this.state={ws:null}}componentDidMount(){this.connect(),this.keep_alive=setInterval((()=>{this.sendMessage({keepAlive:{}})}),2500)}componentWillUnmount(){clearInterval(this.keep_alive),this.setState({ws:null})}shouldComponentUpdate(e){return e.ws_url!==this.props.ws_url}render(){return null}}class fe extends a.Component{constructor(e){super(e),this.state={ws_url:"ws://",rateHz:20,dark_theme:!1}}componentDidMount(){this.setState({ws_url:this.props.ws_url,rateHz:this.props.rateHz,dark_theme:this.props.dark_theme})}shouldComponentUpdate(e,t){return e.show!==this.props.show||t!==this.state}render(){return Object(j.jsxs)(v.a,{open:this.props.show,"aria-labelledby":"form-dialog-title",children:[Object(j.jsx)(z.a,{id:"form-dialog-title",children:"Main settings"}),Object(j.jsx)(y.a,{children:Object(j.jsxs)(M.a,{container:!0,spacing:2,direction:"column",alignItems:"flex-start",children:[Object(j.jsx)(M.a,{item:!0,children:Object(j.jsxs)(F.a,{children:[Object(j.jsx)(D.a,{htmlFor:"ws_url",children:"WebSocket URL"}),Object(j.jsx)(J.a,{id:"ws_url",value:this.state.ws_url,onChange:e=>this.setState({ws_url:e.target.value}),"aria-describedby":"ws_url-helper-text",inputProps:{"aria-label":"WebSocket URL"}}),Object(j.jsx)(R.a,{id:"ws_url-helper-text",children:"Tethered WiFi ws://192.168.43.1:8989"})]})}),Object(j.jsx)(M.a,{item:!0,children:Object(j.jsxs)(F.a,{children:[Object(j.jsx)(D.a,{htmlFor:"rateHz",children:"Render rate"}),Object(j.jsx)(J.a,{id:"rateHz",value:this.state.rateHz,onChange:e=>this.setState({rateHz:Math.min(Math.max(parseInt(e.target.value),.5),20)}),endAdornment:Object(j.jsx)(L.a,{position:"end",children:"Hz"}),"aria-describedby":"rateHz-helper-text",inputProps:{"aria-label":"Render rate"}}),Object(j.jsx)(R.a,{id:"rateHz-helper-text",children:"Min: 0.5, Max: 20"})]})}),Object(j.jsx)(M.a,{item:!0,children:Object(j.jsx)(A.a,{control:Object(j.jsx)(H.a,{checked:this.state.dark_theme,onChange:()=>this.setState({dark_theme:!this.state.dark_theme}),name:"dark_theme"}),label:"Dark theme"})})]})}),Object(j.jsx)(f.a,{children:Object(j.jsx)(S.a,{onClick:()=>this.props.setSettings(this.state.ws_url,this.state.rateHz,this.state.dark_theme),color:"default",children:"Save"})})]})}}var Se=s(183),we=s(176),ke=s(178),Ce=s(179),Pe=s(180),Te=s(185),ze=s(181),Me=s(190),Fe=s(186),De=s(128),Je=s(96),Re=s.n(Je),Ee=s(95),Le=s.n(Ee),Ae=s(97),He=s.n(Ae),Ie=s(177),We=s(98);const Be=Object(We.a)({palette:{type:"light"},typography:{fontFamily:'"Roboto", "Helvetica", "Arial", sans-serif',fontSize:14,fontWeightLight:300,fontWeightRegular:400,fontWeightMedium:500}}),Ue=Object(We.a)({palette:{type:"dark"},typography:{fontFamily:'"Roboto", "Helvetica", "Arial", sans-serif',fontSize:14,fontWeightLight:300,fontWeightRegular:400,fontWeightMedium:500},overrides:{MuiFormLabel:{root:{"&$focused":{color:"yellow"}}}}});class Ve extends a.Component{constructor(e){super(e),this.theme=Be,this.ws_status="",this.sent_count=0,this.received_count=0,this.show_error=!1,this.last_error_msg="",this.renderDelay=()=>{clearInterval(this.render_delay),this.setState({render_revision:this.state.render_revision+1}),this.render_delay=setInterval(this.renderDelay,1e3/this.state.rateHz)},this.messageProcess=e=>{this.received_count>9999&&(this.received_count=0),this.received_count+=1,"error"in e?(this.show_error=!0,this.last_error_msg=e.error):"opEdit"in e?this.pushopedit.current.messageProcess(e):this.pushgraphdata.current&&this.pushgraphdata.current.messageProcess(e)},this.sendWSmsg=e=>{this.sent_count>9999&&(this.sent_count=0),this.sent_count+=1,this.wshelper.current.sendMessage(e)},this.connectionStatus=()=>"connected"===this.ws_status?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(Se.a,{className:this.props.classes.iconSpaced,children:Object(j.jsx)(we.a,{anchorOrigin:{vertical:"top",horizontal:"right"},badgeContent:this.received_count,color:"secondary",showZero:!0,max:9999,children:Object(j.jsx)(ue.a,{color:"inherit"})})}),Object(j.jsx)(Se.a,{className:this.props.classes.iconSpaced,children:Object(j.jsx)(we.a,{anchorOrigin:{vertical:"top",horizontal:"right"},badgeContent:this.sent_count,color:"secondary",showZero:!0,max:9999,children:Object(j.jsx)(me.a,{color:"inherit"})})}),Object(j.jsx)(Le.a,{})]}):"connecting"===this.ws_status?Object(j.jsx)(Re.a,{}):Object(j.jsx)(He.a,{}),this.a11yProps=e=>({id:"plugin-tab-".concat(e),"aria-controls":"plugin-tabpanel-".concat(e)}),this.setTheme=e=>(e!==this.state.dark_theme&&(this.setState({dark_theme:e}),this.theme=e?{...Ue}:{...Be}),this.state.dark_theme?Ue:Be),"localhost"!==window.location.hostname&&(this.ws_url="ws://".concat(window.location.hostname,":8989")),this.state={selectedTab:1,show_mainsettings:!1,ws_url:this.ws_url||"ws://192.168.43.1:8989",rateHz:20,render_revision:0,dark_theme:!1},this.wshelper=i.a.createRef(),this.pushgraphdata=i.a.createRef(),this.pushopedit=i.a.createRef()}componentDidMount(){this.render_delay=setInterval(this.renderDelay,1e3/this.state.rateHz)}shouldComponentUpdate(e,t){return t.render_revision!==this.state.render_revision}render(){const{classes:e}=this.props;return Object(j.jsx)(j.Fragment,{children:Object(j.jsxs)(Ie.a,{theme:this.theme,children:[Object(j.jsx)(ke.a,{}),Object(j.jsx)(ye,{ws_url:this.state.ws_url,messageProcess:this.messageProcess,ref:this.wshelper,status:e=>this.ws_status=e}),Object(j.jsx)(Ce.a,{position:"sticky",color:"default",children:Object(j.jsxs)(Pe.a,{children:[Object(j.jsxs)(Te.a,{className:e.mainTabs,value:this.state.selectedTab,onChange:(e,t)=>this.setState({selectedTab:t}),indicatorColor:"secondary",textColor:"inherit",variant:"scrollable",scrollButtons:"auto","aria-label":"Plugins tabs",children:[Object(j.jsx)(ze.a,{label:"Dashboard",disabled:!0,...this.a11yProps(0)}),Object(j.jsx)(ze.a,{label:"Graphs",...this.a11yProps(1)}),Object(j.jsx)(ze.a,{label:"Joystick",...this.a11yProps(2)}),Object(j.jsx)(ze.a,{label:"OP Edit",...this.a11yProps(3)}),Object(j.jsx)(ze.a,{label:"CAN BUS",disabled:!0,...this.a11yProps(4)})]}),this.connectionStatus(),Object(j.jsx)(De.a,{onClick:()=>{this.setState({show_mainsettings:!0})},"aria-label":"WebSocket connection status",component:"span",color:"inherit",children:Object(j.jsx)(K.a,{})})]})}),Object(j.jsx)(ve,{value:this.state.selectedTab,index:0,children:"Dashboard will be here"}),Object(j.jsx)(ve,{value:this.state.selectedTab,index:1,children:Object(j.jsx)(se,{ref:this.pushgraphdata,active:1===this.state.selectedTab})}),Object(j.jsx)(ve,{value:this.state.selectedTab,index:2,children:Object(j.jsx)(je,{procData:e=>this.sendWSmsg(e),active:2===this.state.selectedTab})}),Object(j.jsx)(ve,{value:this.state.selectedTab,index:3,children:Object(j.jsx)(Oe,{ref:this.pushopedit,procData:e=>this.sendWSmsg(e),active:3===this.state.selectedTab})}),Object(j.jsx)(ve,{value:this.state.selectedTab,index:4,children:"CAN messages will be here"}),this.state.show_mainsettings?Object(j.jsx)(fe,{setSettings:(e,t,s)=>{this.setState({show_mainsettings:!1,ws_url:e,rateHz:t}),this.setTheme(s)},show:this.state.show_mainsettings,ws_url:this.state.ws_url,rateHz:this.state.rateHz,dark_theme:this.state.dark_theme}):null,Object(j.jsx)(Me.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:this.show_error,autoHideDuration:5e3,onClose:()=>this.show_error=!1,children:Object(j.jsx)(Fe.a,{elevation:6,variant:"filled",severity:"error",children:this.last_error_msg})})]})})}}var Ge=Object(W.a)({iconSpaced:{padding:"0 40px 0 0"},mainTabs:{flexGrow:1}})(Ve);r.a.render(Object(j.jsx)(i.a.StrictMode,{children:Object(j.jsx)(Ge,{})}),document.getElementById("root"))}},[[125,1,2]]]);
//# sourceMappingURL=main.f7bc5ff3.chunk.js.map